---
ip_field_name: "ec2_private_ip_address"
domain_name: "tsuru.paas.alphagov.co.uk"
hosts_prefix: "tag_Name_{{ deploy_env }}"
ssl_crt: "{{ aws_ssl_crt }}"
ssl_key: "{{ aws_ssl_key }}"

redis_host_name: "{{ hosts_prefix }}-tsuru-db"
redis_host: "{{ hostvars[groups[redis_host_name][0]][ip_field_name] }}"

tsuru_api_host_name: "{{ hosts_prefix }}-tsuru-api"
tsuru_api_host: "{{ hostvars[groups[tsuru_api_host_name][0]][ip_field_name] }}"
tsuru_api_internal_lb: "{{ deploy_env }}-api-int.{{ domain_name }}"
tsuru_api_external_lb: "{{ deploy_env }}-api.{{ domain_name }}"

gandalf_host_name: "{{ hosts_prefix }}-tsuru-gandalf"
gandalf_host_internal: "{{ hostvars[groups[gandalf_host_name][0]][ip_field_name] }}"

mongodb_host_name: "{{ hosts_prefix }}-tsuru-db"
mongodb_host: "{{ hostvars[groups[mongodb_host_name][0]][ip_field_name] }}"

postgres_host_name: "{{ hosts_prefix }}-tsuru-postgres"
postgres_host: "{{ hostvars[groups[postgres_host_name][0]][ip_field_name] }}"

# WAL-E Configuration
enable_postgres_log_shipping: true
postgresql_wal_level: hot_standby
postgresql_archive_mode: on
postgres_backup_s3_bucket: "{{ deploy_env }}-mcp.postgres.backup"
wal_e_aws_instance_profile: true
postgresql_archive_command: "/usr/bin/envdir {{ wal_e_envdir }} /usr/local/bin/wal-e {% if wal_e_aws_instance_profile %}--aws-instance-profile{% endif %} wal-push %p"
wal_e_s3_prefix: "s3://{{ postgres_backup_s3_bucket }}/wal-e"
wal_e_pgdata_dir: "/var/lib/postgresql/{{ postgresql_version }}/main/"

influxdb_host_name: "{{ hosts_prefix }}-influx-grafana"
influxdb_url: "http://{{ hostvars[groups[influxdb_host_name][0]][ip_field_name] }}:8086"
