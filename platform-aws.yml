---
platform: "aws"
ip_field_name: "ec2_private_ip_address"
domain_name: "tsuru.paas.alphagov.co.uk"
hosts_prefix: "tag_Name_{{ deploy_env }}"
ssl_crt: "{{ aws_ssl_crt }}"
ssl_key: "{{ aws_ssl_key }}"

redis_host_name: "{{ hosts_prefix }}-tsuru-db"
redis_host: "{{ hostvars[groups[redis_host_name][0]][ip_field_name] }}"

tsuru_api_host_name: "{{ hosts_prefix }}-tsuru-api-0"
tsuru_api_host: "{{ hostvars[groups[tsuru_api_host_name][0]][ip_field_name] }}"
tsuru_api_internal_lb: "{{ deploy_env }}-api-int.{{ domain_name }}"
tsuru_api_external_lb: "{{ deploy_env }}-api.{{ domain_name }}"

gandalf_host_name: "{{ hosts_prefix }}-tsuru-gandalf"
gandalf_host_internal: "{{ hostvars[groups[gandalf_host_name][0]][ip_field_name] }}"

mongodb_host_name: "{{ hosts_prefix }}-tsuru-db"
mongodb_host: "{{ hostvars[groups[mongodb_host_name][0]][ip_field_name] }}"

elasticsearch_host: "{{ hostvars[groups[elasticsearch_host_name][0]][ip_field_name] }}"

influxdb_host_name: "{{ hosts_prefix }}-influx-grafana"
influxdb_url: "http://{{ hostvars[groups[influxdb_host_name][0]][ip_field_name] }}:8086"

# WAL-E Configuration
wal_e_aws_instance_profile: true
# This is needed because boto (used by wal-e) has issues uploading when endpoint
# not explicitly specified: https://github.com/boto/boto/issues/2207
wal_e_s3_endpoint: "http+path://s3-eu-west-1.amazonaws.com"
